import{a as P}from"./chunk-SF2N4QN7.js";import{a as b,b as O,c as L,d as A,e as N,f as T,g as z,h as W}from"./chunk-7VCFE4OG.js";import{c as w,e as E}from"./chunk-WER3QG3K.js";import{$a as t,Bb as y,Ia as m,Ka as C,Oa as g,Sa as n,Ta as e,Wa as M,Xa as v,Y as _,bb as x,db as p,eb as u,fb as c,hb as S,ua as l,va as d}from"./chunk-VBPBWIK6.js";function D(o,h){if(o&1&&(n(0,"div",11)(1,"span",7),t(2,"error"),e(),t(3),e()),o&2){let r=v();l(3),x(" ",r.error," ")}}function F(o,h){o&1&&(n(0,"span",14),t(1,"sync"),e(),t(2," Connexion en cours... "))}function I(o,h){o&1&&(n(0,"span",7),t(1,"login"),e(),t(2," Se connecter "))}var R=(()=>{class o{constructor(r,s,i){this.authService=r,this.router=s,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/agent",this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/agent",this.authService.isLoggedIn()&&this.router.navigate([this.returnUrl])}login(){if(!this.username||!this.password){this.error="Veuillez remplir tous les champs";return}this.loading=!0,this.error="",this.authService.login(this.username,this.password).subscribe({next:r=>{this.loading=!1,r.success?this.router.navigate([this.returnUrl]):this.error=r.message||"Erreur de connexion"},error:r=>{this.loading=!1,this.error=r.error?.message||"Erreur de connexion au serveur"}})}static{this.\u0275fac=function(s){return new(s||o)(d(P),d(E),d(w))}}static{this.\u0275cmp=_({type:o,selectors:[["app-login"]],standalone:!0,features:[S],decls:29,vars:5,consts:[[1,"login-page"],[1,"card","login-card"],[1,"login-header"],[1,"logo-icon"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"material-icons"],["type","text","id","username","name","username","placeholder","Entrez votre nom d'utilisateur","required","","autocomplete","username",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","placeholder","Entrez votre mot de passe","required","","autocomplete","current-password",3,"ngModelChange","ngModel"],[1,"alert","alert-error"],["type","submit",1,"btn","btn-primary","btn-lg","full-width",3,"disabled"],[1,"login-footer"],[1,"material-icons","spinning"]],template:function(s,i){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t(4,"\u{1F3AB}"),e(),n(5,"h1"),t(6,"Smart Queue"),e(),n(7,"p"),t(8,"Connexion Agent / Admin"),e()(),n(9,"form",4),M("ngSubmit",function(){return i.login()}),n(10,"div",5)(11,"label",6)(12,"span",7),t(13,"person"),e(),t(14," Nom d'utilisateur "),e(),n(15,"input",8),c("ngModelChange",function(a){return u(i.username,a)||(i.username=a),a}),e()(),n(16,"div",5)(17,"label",9)(18,"span",7),t(19,"lock"),e(),t(20," Mot de passe "),e(),n(21,"input",10),c("ngModelChange",function(a){return u(i.password,a)||(i.password=a),a}),e()(),m(22,D,4,1,"div",11),n(23,"button",12),m(24,F,3,0)(25,I,3,0),e()(),n(26,"div",13)(27,"p"),t(28,"Acc\xE8s r\xE9serv\xE9 au personnel autoris\xE9"),e()()()()),s&2&&(l(15),p("ngModel",i.username),l(6),p("ngModel",i.password),l(),g(22,i.error?22:-1),l(),C("disabled",i.loading),l(),g(24,i.loading?24:25))},dependencies:[y,W,T,b,O,L,z,N,A],styles:[".login-page[_ngcontent-%COMP%]{min-height:60vh;display:flex;align-items:center;justify-content:center}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2.5rem}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1a365d;margin:.5rem 0 .25rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.25rem;color:#718096}.full-width[_ngcontent-%COMP%]{width:100%}.alert-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fed7d7;color:#c53030;padding:1rem;border-radius:8px;margin-bottom:1rem}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e2e8f0;color:#a0aec0;font-size:.875rem}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}}return o})();export{R as LoginComponent};
