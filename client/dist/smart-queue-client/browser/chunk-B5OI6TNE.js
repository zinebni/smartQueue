import{c as P}from"./chunk-WER3QG3K.js";import{a as O}from"./chunk-S5QAMRH3.js";import{a as M}from"./chunk-NYQL35S2.js";import{$a as i,Ab as b,Bb as y,Ia as m,Ma as h,Oa as p,Qa as g,Ra as f,Sa as a,Ta as t,Xa as u,Y as v,ab as l,bb as x,hb as _,ib as C,jb as S,ua as o,va as d}from"./chunk-VBPBWIK6.js";var w=(n,c)=>c._id;function k(n,c){if(n&1&&(a(0,"div",15)(1,"div",16),i(2),t(),a(3,"div",17)(4,"span",6),i(5,"meeting_room"),t(),i(6),t()()),n&2){let e=c.$implicit,r=u(2);h("pulse",r.isRecent(e.calledAt)),o(2),l(e.ticketNumber),o(4),x(" Guichet ",e.counterNumber||"-"," ")}}function E(n,c){if(n&1&&(a(0,"div",10),g(1,k,7,4,"div",14,w),t()),n&2){let e=u();o(),f(e.queueStatus.nowServing)}}function I(n,c){n&1&&(a(0,"div",18)(1,"span",6),i(2,"hourglass_empty"),t(),a(3,"p"),i(4,"Aucun ticket en cours"),t()())}function D(n,c){if(n&1&&(a(0,"div",19)(1,"span",20),i(2),t(),a(3,"span",21),i(4),t()()),n&2){let e=c.$implicit,r=c.$index;o(2),l(r+1),o(2),l(e.ticketNumber)}}function Q(n,c){if(n&1&&(a(0,"div",12),g(1,D,5,2,"div",19,w),t()),n&2){let e=u();o(),f(e.queueStatus.nextInQueue.slice(0,8))}}function T(n,c){n&1&&(a(0,"p",22),i(1,"Aucun ticket en attente"),t())}var F=(()=>{class n{constructor(e,r,s){this.statsService=e,this.socketService=r,this.route=s,this.queueStatus=null,this.currentTime=new Date,this.service="",this.subscriptions=[],this.serviceNames={account:"Gestion de Compte",loan:"Gestion de Pr\xEAt",payment:"Gestion de Paiement",general:"Service G\xE9n\xE9ral",registration:"Inscription",consultation:"Consultation"},this.serviceIcons={account:"account_balance",loan:"payments",payment:"payment",general:"help",registration:"how_to_reg",consultation:"contact_support"}}ngOnInit(){this.service=this.route.snapshot.paramMap.get("service")||"",this.loadQueueStatus(),this.subscriptions.push({unsubscribe:()=>clearInterval(setInterval(()=>this.currentTime=new Date,1e3))}),setInterval(()=>this.currentTime=new Date,1e3),this.subscriptions.push(this.socketService.onTicketCalled().subscribe(()=>this.loadQueueStatus()),this.socketService.onTicketUpdated().subscribe(()=>this.loadQueueStatus()),this.socketService.onTicketCreated().subscribe(()=>this.loadQueueStatus()));let e=setInterval(()=>this.loadQueueStatus(),3e4);this.subscriptions.push({unsubscribe:()=>clearInterval(e)})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadQueueStatus(){this.statsService.getQueueStatus(this.service).subscribe({next:e=>{e.success&&e.data&&(this.queueStatus=e.data)}})}isRecent(e){return e?Date.now()-new Date(e).getTime()<3e4:!1}getServiceName(){return this.serviceNames[this.service]||"Service"}getServiceIcon(){return this.serviceIcons[this.service]||"help"}static{this.\u0275fac=function(r){return new(r||n)(d(O),d(M),d(P))}}static{this.\u0275cmp=v({type:n,selectors:[["app-queue-display"]],standalone:!0,features:[_],decls:32,vars:8,consts:[[1,"queue-display-page"],[1,"display-header"],[1,"logo"],[1,"logo-icon"],[1,"logo-text"],[1,"service-badge"],[1,"material-icons"],[1,"time"],[1,"display-content"],[1,"now-serving"],[1,"serving-grid"],[1,"waiting-section"],[1,"waiting-list"],[1,"display-footer"],[1,"serving-card",3,"pulse"],[1,"serving-card"],[1,"ticket-number"],[1,"counter-info"],[1,"no-tickets"],[1,"waiting-item"],[1,"position"],[1,"ticket-num"],[1,"no-waiting"]],template:function(r,s){r&1&&(a(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),i(4,"\u{1F3AB}"),t(),a(5,"span",4),i(6,"Smart Queue"),t()(),a(7,"div",5)(8,"span",6),i(9),t(),i(10),t(),a(11,"div",7),i(12),C(13,"date"),t()(),a(14,"main",8)(15,"section",9)(16,"h2")(17,"span",6),i(18,"campaign"),t(),i(19," EN COURS DE SERVICE "),t(),m(20,E,3,0,"div",10)(21,I,5,0),t(),a(22,"section",11)(23,"h2")(24,"span",6),i(25,"schedule"),t(),i(26," PROCHAINS APPELS "),t(),m(27,Q,3,0,"div",12)(28,T,2,0),t()(),a(29,"footer",13)(30,"p"),i(31,"Merci de patienter - Votre ticket sera appel\xE9 prochainement"),t()()()),r&2&&(o(9),l(s.getServiceIcon()),o(),x(" ",s.getServiceName()," "),o(2),l(S(13,5,s.currentTime,"HH:mm:ss")),o(8),p(20,!(s.queueStatus==null||s.queueStatus.nowServing==null)&&s.queueStatus.nowServing.length?20:21),o(7),p(27,!(s.queueStatus==null||s.queueStatus.nextInQueue==null)&&s.queueStatus.nextInQueue.length?27:28))},dependencies:[y,b],styles:[".queue-display-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a365d,#0d1b2a);color:#fff;display:flex;flex-direction:column}.display-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;background:linear-gradient(135deg,#2c5282,#1e3a5f);box-shadow:0 4px 6px #0000004d}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.logo-icon[_ngcontent-%COMP%]{font-size:2rem}.logo-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.service-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background:#48bb78;color:#fff;padding:.75rem 2rem;border-radius:12px;font-size:1.25rem;font-weight:700;box-shadow:0 4px 8px #0003}.service-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.75rem}.time[_ngcontent-%COMP%]{font-size:1.75rem;font-family:monospace;font-weight:700;flex:1;text-align:right}.display-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;background:#0003}.display-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.time[_ngcontent-%COMP%]{font-size:2rem;font-family:monospace}.display-content[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-columns:2fr 1fr;gap:2rem;padding:2rem}.now-serving[_ngcontent-%COMP%], .waiting-section[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:16px;padding:2rem}h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;font-size:1.5rem;text-transform:uppercase;letter-spacing:.05em}.serving-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.serving-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#38a169,#2f855a);padding:2rem;border-radius:16px;text-align:center;box-shadow:0 10px 30px #0000004d}.serving-card.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.ticket-number[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;letter-spacing:.1em;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.counter-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:1.5rem;margin-top:1rem;opacity:.9}.waiting-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.waiting-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#ffffff1a;padding:1rem 1.5rem;border-radius:8px}.position[_ngcontent-%COMP%]{width:36px;height:36px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600}.ticket-num[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;letter-spacing:.05em}.no-tickets[_ngcontent-%COMP%], .no-waiting[_ngcontent-%COMP%]{text-align:center;opacity:.5;padding:3rem}.no-tickets[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem}.display-footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background:#0003;opacity:.7}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);box-shadow:0 10px 30px #0000004d}50%{transform:scale(1.02);box-shadow:0 15px 40px #38a16966}}@media (max-width: 768px){.display-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.ticket-number[_ngcontent-%COMP%]{font-size:3rem}}"]})}}return n})();export{F as QueueDisplayComponent};
