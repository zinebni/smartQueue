import{a as B,c as G}from"./chunk-DXTANF2M.js";import{a as I,b as z,c as W,d as F,e as j,f as A,h as L}from"./chunk-G2YLY2U7.js";import{e as D}from"./chunk-BQ55YN6H.js";import{$a as n,Ab as V,Bb as N,Ia as g,Ka as h,Ma as E,Oa as C,Qa as S,Ra as y,Sa as t,Ta as i,Va as f,Wa as _,Xa as l,Y as b,ab as u,bb as M,db as k,ea as d,eb as v,fa as p,fb as T,hb as P,ib as w,jb as O,ua as c,va as x}from"./chunk-FUL3TK4O.js";var H=(r,s)=>s.value;function R(r,s){if(r&1){let e=f();t(0,"div",14),_("click",function(){let o=d(e).$implicit,m=l(2);return p(m.ticketData.serviceType=o.value)}),t(1,"span",2),n(2),i(),t(3,"span"),n(4),i()()}if(r&2){let e=s.$implicit,a=l(2);E("selected",a.ticketData.serviceType===e.value),c(2),u(e.icon),c(2),u(e.label)}}function q(r,s){if(r&1&&(t(0,"div",12),n(1),i()),r&2){let e=l(2);c(),u(e.error)}}function Y(r,s){r&1&&(t(0,"span",15),n(1,"sync"),i(),n(2," Cr\xE9ation en cours... "))}function J(r,s){r&1&&(t(0,"span",2),n(1,"print"),i(),n(2," G\xE9n\xE9rer mon Ticket "))}function K(r,s){if(r&1){let e=f();t(0,"form",3),_("ngSubmit",function(){d(e);let o=l();return p(o.createTicket())}),t(1,"div",4)(2,"label",5),n(3,"Type de Service *"),i(),t(4,"div",6),S(5,R,5,4,"div",7,H),i()(),t(7,"div",4)(8,"label",8),n(9,"Votre Nom (optionnel)"),i(),t(10,"input",9),T("ngModelChange",function(o){d(e);let m=l();return v(m.ticketData.customerName,o)||(m.ticketData.customerName=o),p(o)}),i()(),t(11,"div",4)(12,"label",10),n(13,"T\xE9l\xE9phone (optionnel)"),i(),t(14,"input",11),T("ngModelChange",function(o){d(e);let m=l();return v(m.ticketData.customerPhone,o)||(m.ticketData.customerPhone=o),p(o)}),i()(),g(15,q,2,1,"div",12),t(16,"button",13),g(17,Y,3,0)(18,J,3,0),i()()}if(r&2){let e=l();c(5),y(e.serviceTypes),c(5),k("ngModel",e.ticketData.customerName),c(4),k("ngModel",e.ticketData.customerPhone),c(),C(15,e.error?15:-1),c(),h("disabled",e.loading),c(),C(17,e.loading?17:18)}}function Q(r,s){if(r&1){let e=f();t(0,"div",16)(1,"div",17)(2,"span",2),n(3,"check_circle"),i()(),t(4,"h2"),n(5,"Votre ticket a \xE9t\xE9 cr\xE9\xE9 !"),i(),t(6,"div",18)(7,"div",19),n(8),i(),t(9,"div",20),n(10),i()(),t(11,"div",21)(12,"div",22)(13,"span",2),n(14,"schedule"),i(),t(15,"span"),n(16,"Temps d'attente estim\xE9: "),t(17,"strong"),n(18),i()()(),t(19,"div",22)(20,"span",2),n(21,"access_time"),i(),t(22,"span"),n(23,"Cr\xE9\xE9 \xE0: "),t(24,"strong"),n(25),w(26,"date"),i()()()(),t(27,"div",23)(28,"button",24),_("click",function(){d(e);let o=l();return p(o.trackTicket())}),t(29,"span",2),n(30,"visibility"),i(),n(31," Suivre mon ticket "),i(),t(32,"button",25),_("click",function(){d(e);let o=l();return p(o.createAnother())}),t(33,"span",2),n(34,"add"),i(),n(35," Nouveau ticket "),i()(),t(36,"p",26)(37,"span",2),n(38,"info"),i(),n(39," Conservez votre num\xE9ro de ticket. Vous serez appel\xE9 sur l'\xE9cran d'affichage. "),i()()}if(r&2){let e=l();c(8),u(e.createdTicket.ticketNumber),c(2),u(e.getServiceLabel(e.createdTicket.serviceType)),c(8),M("~",e.createdTicket.estimatedWaitTime," min"),c(7),u(O(26,4,e.createdTicket.createdAt,"HH:mm"))}}var re=(()=>{class r{constructor(e,a){this.ticketService=e,this.router=a,this.serviceTypes=B,this.ticketData={serviceType:"general"},this.createdTicket=null,this.loading=!1,this.error=""}createTicket(){this.loading=!0,this.error="",this.ticketService.createTicket(this.ticketData).subscribe({next:e=>{this.loading=!1,e.success&&e.data?this.createdTicket=e.data:this.error=e.message||"Erreur lors de la cr\xE9ation du ticket"},error:e=>{this.loading=!1,this.error=e.error?.message||"Erreur de connexion au serveur"}})}getServiceLabel(e){return this.serviceTypes.find(a=>a.value===e)?.label||e}trackTicket(){this.createdTicket&&this.router.navigate(["/ticket-status"],{queryParams:{ticket:this.createdTicket.ticketNumber}})}createAnother(){this.createdTicket=null,this.ticketData={serviceType:"general"}}static{this.\u0275fac=function(a){return new(a||r)(x(G),x(D))}}static{this.\u0275cmp=b({type:r,selectors:[["app-create-ticket"]],standalone:!0,features:[P],decls:8,vars:1,consts:[[1,"create-ticket-page"],[1,"card","ticket-form-card"],[1,"material-icons"],[3,"ngSubmit"],[1,"form-group"],["for","serviceType"],[1,"service-grid"],[1,"service-option",3,"selected"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Ex: Prenom Nom",3,"ngModelChange","ngModel"],["for","customerPhone"],["type","tel","id","customerPhone","name","customerPhone","placeholder","Ex: 0612345678",3,"ngModelChange","ngModel"],[1,"alert","alert-error"],["type","submit",1,"btn","btn-primary","btn-lg","full-width",3,"disabled"],[1,"service-option",3,"click"],[1,"material-icons","spinning"],[1,"ticket-created"],[1,"success-icon"],[1,"ticket-display"],[1,"ticket-number-large"],[1,"ticket-service"],[1,"ticket-info"],[1,"info-row"],[1,"ticket-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"notice"]],template:function(a,o){a&1&&(t(0,"div",0)(1,"div",1)(2,"h1")(3,"span",2),n(4,"confirmation_number"),i(),n(5," Prendre un Ticket "),i(),g(6,K,19,5,"form")(7,Q,40,7),i()()),a&2&&(c(6),C(6,o.createdTicket?7:6))},dependencies:[N,V,L,A,I,z,W,j,F],styles:[".create-ticket-page[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.ticket-form-card[_ngcontent-%COMP%]{padding:2rem}h1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#1a365d;margin-bottom:2rem}.service-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.service-option[_ngcontent-%COMP%]{padding:1.5rem;border:2px solid #e2e8f0;border-radius:12px;text-align:center;cursor:pointer;transition:all .2s}.service-option[_ngcontent-%COMP%]:hover{border-color:#2b6cb0}.service-option.selected[_ngcontent-%COMP%]{border-color:#2b6cb0;background:#ebf8ff}.service-option[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{display:block;font-size:2rem;color:#2b6cb0;margin-bottom:.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.ticket-created[_ngcontent-%COMP%]{text-align:center}.success-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:4rem;color:#38a169;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.ticket-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a365d,#2b6cb0);color:#fff;padding:2rem;border-radius:16px;margin:1.5rem 0}.ticket-number-large[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;letter-spacing:.1em}.ticket-service[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.9;margin-top:.5rem}.ticket-info[_ngcontent-%COMP%]{margin:1.5rem 0}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem;color:#4a5568}.ticket-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin:1.5rem 0}.notice[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;color:#718096;font-size:.875rem;margin-top:1.5rem}.alert-error[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030;padding:1rem;border-radius:8px;margin-bottom:1rem}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 480px){.service-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.ticket-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return r})();export{re as CreateTicketComponent};
